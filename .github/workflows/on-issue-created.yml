name: Trigger Issue Created Jira Flow

permissions:
  contents: read
  issues: read

on:
#   issues:
#     types: [opened]
  workflow_dispatch:
    inputs:
      project_key:
        description: Jira project key to use for the issue
        required: true
      issue_title:
        description: Title to use in Jira
        required: true
      issue_body:
        description: Body/description to use in Jira
        required: false

jobs:
  call-issue-created:
    uses: transurban/github-action-templates/.github/workflows/create-jira-card-on-issue-creation.yml@Add-New-Github-Rulesets
    with:
      issue_title: ${{ inputs.issue_title }}
      issue_body: ${{ inputs.issue_body }}
      project_key: ${{ inputs.project_key }}
    secrets:
      JIRA_USER: ${{ secrets.ATLASSIAN_JIRA_GITHUB_ACTION_USER_EMAIL }}
      JIRA_API_TOKEN: ${{ secrets.ATLASSIAN_JIRA_GITHUB_ACTION_API_TOKEN }}
      JIRA_BASE_URL: ${{ secrets.ATLASSIAN_JIRA_BASE_URL }}